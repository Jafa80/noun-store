#!/usr/bin/env bash

ROOT="$( cd "$( dirname "${BASH_SOURCE[0]}" )/../" && pwd )"
WORKING_DIR="$ROOT"

. "$ROOT"/docker/lib/args.sh
. "$ROOT"/docker/lib/docker_host_user_id.sh
. "$ROOT"/docker/lib/tty.sh

docker run \
    --rm \
    -e LOCAL_USER_ID=${DOCKER_HOST_USER_ID} \
    -i \
    ${TTY} \
    -v "$WORKING_DIR":"$WORKING_DIR" \
    -v ~/.composer:/home/user/.composer \
    ${VOLUMES} \
    -w "$WORKING_DIR" \
    chekote/noun-store-php:2017-12-11 php "${ARGS[@]}"
